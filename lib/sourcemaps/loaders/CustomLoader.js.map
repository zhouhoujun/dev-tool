{"version":3,"sources":["loaders/CustomLoader.js","loaders/CustomLoader.ts"],"names":["development_core_1","require","CustomLoader","option","loader","factory","_classCallCheck","this","context","Promise","resolve","env","self","condef","bindingConfig","createContext","exports"],"mappings":"AAAA,6XCAAA,mBAAAC,QAA4E,oBAK5EC,wBAEI,QAAAA,GAAoBC,EAA6BC,EAA8BC,GAAmEC,gBAAAC,KAAAL,GAA9HK,KAAAJ,OAAAA,EAA6BI,KAAAH,OAAAA,EAA8BG,KAAAF,QAAAA,oDAI1EG,GACD,MAAOC,SAAQC,QAAQH,KAAKH,OAAOI,wCAI3BG,GACR,GAAIC,GAAOL,IAQX,OAPAA,MAAKM,OAASN,KAAKM,QAAUJ,QAAQC,QACvBV,mBAAAc,eACNX,OAAQS,EAAKT,OACbQ,IAAKA,EACLI,cAAeH,EAAKP,WAGrBE,KAAKM,eApBPG,SAAAd,aAAYA","file":"../../loaders/CustomLoader.js","sourcesContent":["\"use strict\";\nconst development_core_1 = require('development-core');\nclass CustomLoader {\n    constructor(option, loader, factory) {\n        this.option = option;\n        this.loader = loader;\n        this.factory = factory;\n    }\n    load(context) {\n        return Promise.resolve(this.loader(context));\n    }\n    loadContext(env) {\n        let self = this;\n        this.condef = this.condef || Promise.resolve(development_core_1.bindingConfig({\n            option: self.option,\n            env: env,\n            createContext: self.factory\n        }));\n        return this.condef;\n    }\n}\nexports.CustomLoader = CustomLoader;\n","import { ITask, IEnvOption, ITaskContext, bindingConfig, ITaskConfig } from 'development-core';\r\nimport { ITaskOption, customLoader } from '../TaskOption';\r\nimport { IContext } from '../IContext';\r\nimport { ITaskLoader } from '../ITaskLoader';\r\n\r\nexport class CustomLoader implements ITaskLoader {\r\n\r\n    constructor(private option: ITaskOption, private loader: customLoader, private factory?: (cfg: ITaskConfig, parent?: ITaskContext) => ITaskContext) {\r\n\r\n    }\r\n\r\n    load(context: ITaskContext): Promise<ITask[]> {\r\n        return Promise.resolve(this.loader(context));\r\n    }\r\n\r\n    private condef: Promise<IContext>;\r\n    loadContext(env: IEnvOption): Promise<IContext> {\r\n        let self = this;\r\n        this.condef = this.condef || Promise.resolve(\r\n            <IContext>bindingConfig({\r\n                option: self.option,\r\n                env: env,\r\n                createContext: self.factory\r\n            }));\r\n\r\n        return this.condef;\r\n    }\r\n}\r\n"]}